<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <div class="container">
        <div class="timeTimer">
            <div class="minute">
                <div class="m0"><span>0</span></div>
                <div class="m5"><span>5</span></div>
                <div class="m10"><span>10</span></div>
                <div class="m15"><span>15</span></div>
                <div class="m20"><span>20</span></div>
                <div class="m25"><span>25</span></div>
                <div class="m30"><span>30</span></div>
                <div class="m35"><span>35</span></div>
                <div class="m40"><span>40</span></div>
                <div class="m45"><span>45</span></div>
                <div class="m50"><span>50</span></div>
                <div class="m55"><span>55</span></div>
            </div>
            <canvas id="remainTime" width="220" height="220"></canvas>
        </div>

        <div class="playController">
            <h3 class="controller">TimeTimer</h3>
            <input id="minute" type="text" class="timeReceiver" name="receivedTime" value="0" size="2" onkeyup="getMinute(), clickPause()" onchange="handleChange(), getMinute()"/>
            <button id="play"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"/>
          </svg> START</button>
        <button id="pause"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"/>
          </svg> PAUSE</button>
          <button id="reset"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stop-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"/>
          </svg> RESET</button>
        </div>
        
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    var btnPlay = $("#play"),
        btnPause = $("#pause"),
        btnReset = $("#reset");

    var minute  = 60,        
        remainTime,
        timer,
        run =false;

    var canvas = document.getElementById("remainTime");
    var ctx = canvas.getContext("2d");
    ctx.strokeStyle = "#ff0000";
    ctx.lineWidth = 90;


    btnPause.hide();

    btnPlay.on("click", clickPlay);
    btnPause.on("click", clickPause);
    btnReset.on("click", clickReset);



    function handleChange() {
        if (document.getElementById('minute').value > 60) document.getElementById('minute').value = 60;
        if (document.getElementById('minute').value < 1) document.getElementById('minute').value = 1;
    }

    function getMinute() {
        var minute = document.getElementById('minute').value;
	    remainTime = minute * 60;
	    if (minute == 60) remainTime--;
	    drawArc();
    }

    function drawArc() {
        var remainPercent = (60 * 60 - remainTime) / (60*60);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.beginPath();
        ctx.arc(110, 110, 64, 1.5 * Math.PI + remainPercent * (2 * Math.PI), 1.5 * Math.PI);
        ctx.stroke();
    }

    function clickPlay(){
        run = true;
	    btnPlay.hide();
	    btnPause.show();
	    timer = setInterval(runTimer, 1000);
    }

    function clickPause(){
        run = false;
	    btnPlay.show();
	    btnPause.hide();
	    clearInterval(timer);
	    $("body").removeClass("blink");
    }

    function clickReset(){
        clickPause();
	    getMinute();
    }

    function runTimer() {
	if (remainTime === 0) {
		clearInterval(timer);
        $("body").addClass("blink");
	    btnPause.hide();
	} else {
		remainTime--;
		drawArc();
	}
}

</script>

</body>
</html>